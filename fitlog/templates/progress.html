{% extends "base.html" %}
{% block content %}
<h2>Fortschritt: {{ plan.name }}</h2>

<h3>Balkendiagramm (aktuelles Gewicht je Übung)</h3>
<img src="{{ url_for('progress.bar_chart', plan_id=plan.id) }}" alt="Plan-Bar-Chart">

<h3>Gewichtsverlauf (Liniendiagramm)</h3>
<form id="line-form">
  <label>Übung</label>
  <select id="exercise" name="exercise_id" onchange="updateLine()">
    {% for ex in plan.exercises %}
      <option value="{{ ex.id }}">{{ ex.name }}</option>
    {% endfor %}
  </select>
</form>
<img id="line-img" src="{{ url_for('progress.exercise_line') }}?exercise_id={{ plan.exercises[0].id if plan.exercises else 0 }}" alt="Exercise-Line-Chart">

<script>
  function updateLine(){
    const ex = document.getElementById('exercise').value;
    const img = document.getElementById('line-img');
    img.src = '{{ url_for("progress.exercise_line") }}?exercise_id=' + ex + '&_=' + Date.now();
  }
</script>
{% endblock %}
